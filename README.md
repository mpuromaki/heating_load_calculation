# Heating Load Calculation

ℹ️ Documentation generated by ChatGPT.

This project estimates residential heating electricity usage from hourly electricity consumption and temperature data. 
It calculates base electrical load, separates heating-related consumption, and visualizes heating efficiency over time.

## Overview

The script:

* Normalizes electricity and temperature data from CSV files.
* Estimates non-heating base load electricity usage.
* Calculates heating electricity usage by subtracting the base load.
* Computes heating efficiency (electricity per degree of heating).
* Generates daily visualizations for analysis.

## Expected Input

Place input CSV files in the `raw/` directory with the following naming conventions:

```
/raw/<YEAR>_electricity_hourly.csv
/raw/<YEAR>_temperature_hourly.csv
```

**Electricity data** is expected in the Fingrid Datahub format.
**Temperature data** is expected in the Finnish Meteorological Institute format.

## Installation

Make sure you have Python 3.8 or newer installed.

Required Python packages and tools:

* Python (>= 3.8)
* Jupyter Notebook
* jupytext
* pandas
* matplotlib
* numpy

You can install all dependencies using pip:

```bash
pip install pandas matplotlib numpy jupyter jupytext
```

## Running the Script

You can run the script in a Jupyter Notebook or directly as a Python file.

### Option 1: Run as a Python Script

```bash
python heating_load.py
```

This will:

* Normalize all matching electricity and temperature files from `raw/`
* Save processed files in the `normalised/` folder
* Estimate daily heating usage
* Plot base load, usage, and efficiency per year

### Option 2: Run in Jupyter Notebook

To work with the script interactively:

1. Convert the Python script to a notebook (if it's not already synced):

```bash
jupytext --to notebook heating_load.py
```

2. Start Jupyter:

```bash
jupyter notebook
```

3. Open `heating_load.ipynb` in your browser.

You can step through and modify the script interactively within the notebook interface.

## Output

* Normalized CSV files in `normalised/`
* Daily time series printed to console
* Yearly charts displayed showing:

  * Heating and base electricity usage vs. outside temperature
  * Heating efficiency (kWh/°C) per day

## Configuration

Edit the following variables in `heating_load.py` to suit your needs:

```python
INTERNAL_TEMPERATURE = 22.0  # °C
NO_HEAT_TEMP_MIN = 18        # °C
NO_HEAT_TEMP_MAX = 22        # °C
ADDRESS = "<YOUR ADDRESS HERE>"
```

## Notes

* The script assumes UTC timestamps in input files.
* Missing data is handled with resampling and interpolation where appropriate.
* Data sources with a different schema will require modifications to normalization functions.
